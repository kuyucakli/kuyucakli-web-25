---
import { IconBackArrow } from "./Icons";
const { nextItem, prevItem, category } = Astro.props;
let prevHref, nextHref;

if (category) {
  prevHref = `/posts/${category}-${prevItem?.id}`;
  nextHref = `/posts/${category}-${nextItem?.id}`;
} else {
  prevHref = `${prevItem?.id}`;
  nextHref = `${nextItem?.id}`;
}
---

<nav class="flex-row-center" id="nav-directional">
  <a
    href="/"
    class="headlinemedium flex-vertical-center"
    style="margin-left:-24px;"
  >
    <IconBackArrow fill="var(--clr-on-surface)" width={128} height={128} />
    Back
  </a>

  {prevItem && <a href={prevHref}>Prev</a>}
  {nextItem && <a href={nextHref}>Next</a>}
</nav>

<style>
  nav {
    width: 100%;
    max-width: 640px;
    position: fixed;
    bottom: 0;
    left: 50%;
    transform: translateX(-50%);

    align-items: center;
    justify-content: start !important;
    gap: var(--s-sm-2);
    visibility: hidden;
  }
</style>

<script>
  import { debounce } from "../utils";
  document.addEventListener("astro:after-swap", init);

  init();

  function init() {
    const navDirectionalEl = document.querySelector("#nav-directional");

    if (!navDirectionalEl) return;
    window.addEventListener(
      "scroll",
      debounce(() => {
        if (window.scrollY > 100) {
          navDirectionalEl.style.visibility = "visible";
        } else {
          navDirectionalEl.style.visibility = "hidden";
        }
      }, 20)
    );
  }
</script>
